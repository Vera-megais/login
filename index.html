<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FB登入測試</title>
  <!-- js -->
  <script src="./js/jquery-3.6.1.min.js"></script>
</head>

<body>

  <input type="button" class="login" value="登入">
  <input type="button" class="logout" value="登出">

  <script>

    $(function () {
      (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

      window.fbAsyncInit = function () {
        FB.init({
          appId: '1123697398667586',
          cookie: true,
          xfbml: true,
          version: 'v19.0'
        });
        FB.AppEvents.logPageView();
      };

      $('.login').click(function () {
        FB.login(function (res) {
          if (res.status === 'connected') {
            FB.api('/me', {
              access_token: 'cfef80b95fb1a542741b03b7162e6619',
              fields: 'id, name, gender, age_range, birthday, cover, devices, email, first_name, last_name',
            }, function (res) {
              console.log(res);
              console.log('信箱' + res.email);
            });
          } else {
            console.log('尚未登入');
          }
        }, {
          scope: 'email, public_profile',
          return_scopes: true
        });
      })

      $('.logout').click(function () {
        FB.logout(function (res) {
          console.log(res);
        });
      })




    })



  </script>

</body>

</html>